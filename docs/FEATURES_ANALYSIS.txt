================================================================================
                   ZATTAR ADVOGADOS - FEATURES ANALYSIS
                        src/features/ Structure Map
================================================================================

EXECUTIVE SUMMARY
================================================================================

Total Features: 30
- Fully Migrated:      17 features (57%)
- Partially Migrated:   7 features (23%)
- Not Migrated:         6 features (20%)

Key Architecture Pattern (Fully Migrated):
  - domain.ts       : Type definitions, enums, and data models
  - service.ts      : Business logic and operations
  - repository.ts   : Database access and data persistence
  - actions/        : Server actions (Next.js) with typed operations
  - components/     : React components
  - hooks/          : Custom React hooks for state management
  - __tests__/      : Unit and integration tests
  - RULES.md        : Business rules documentation (optional)


================================================================================
                        FULLY MIGRATED (17 Features)
================================================================================

COMPLETE STANDARD STRUCTURE:
  1. acervo            - Document archive management
  2. advogados         - Lawyer management (with sub-feature: credenciais)
  3. ai                - AI/RAG infrastructure with embeddings and search
  4. assistentes       - Assistant management system
  5. captura           - Multi-driver judicial document capture (PJE, TRT, Comunica CNJ)
  6. cargos            - Position/role management
  7. contratos         - Contract management (HAS RULES.md - 191 lines)
  8. enderecos         - Address management with CEP integration
  9. expedientes       - Expedition management with bulk operations
 10. notificacoes      - Notification system
 11. obrigacoes        - Obligation and payment tracking (HAS RULES.md)
 12. pangea            - Background check integration
 13. pericias          - Expert evidence management
 14. processos         - Judicial process management (HAS RULES.md - 105+ lines)
 15. rh                - Human resources with payroll submodules
 16. tipos-expedientes - Expedition type configuration
 17. usuarios          - User management with permissions and activities (8 action files)


================================================================================
                    PARTIALLY MIGRATED (7 Features)
================================================================================

MISSING OR INCOMPLETE CORE STRUCTURE:

1. assinatura-digital  - Missing: domain.ts, service.ts, repository.ts, actions/
   Status: Heavy UI focus, services in services/ directory, complex form schemas

2. audiencias          - Missing: domain.ts, service.ts, repository.ts
   Status: Has service.ts only, includes AI agent and virtual hearing services

3. chat                - Missing: repository.ts (non-standard naming: repositories/)
   Status: Has domain.ts and service.ts, Dyte meeting integration

4. documentos          - Missing: service.ts, repository.ts (non-standard: repositories/, services/)
   Status: 8 action files, document editor, file manager, collaboration features

5. partes              - Missing: service.ts, repository.ts (non-standard: repositories/)
   Status: Organized by party type (clients, opposing parties, representatives, third parties)

6. perfil              - Missing: domain.ts, service.ts, repository.ts
   Status: Minimal, UI and actions only, password management

7. portal-cliente      - Missing: domain.ts, repository.ts
   Status: Client-facing portal with limited backend structure


================================================================================
                     NOT MIGRATED (6 Features)
================================================================================

ALTERNATIVE STRUCTURES OR INCOMPLETE:

1. busca               - Actions only (busca-actions), no data layer
   Status: Search operations without persistent data

2. calendar            - Pure UI component structure, no backend integration
   Status: Multiple calendar views (month/week/day/agenda), drag-and-drop

3. financeiro          - SPECIAL: Subdomain-based architecture
   Status: Each subdomain (conciliacao, dre, fluxo-caixa, etc.) has domain/ and repository/
           This is a complete alternative pattern

4. profiles            - Config-driven profile system
   Status: Configuration files for different entity types (client, user, representative)

5. repasses            - Stub/WIP feature
   Status: Only one component file, incomplete

6. tasks               - Empty/not started
   Status: Only index.ts exists


================================================================================
                        KEY STRUCTURE FILES
================================================================================

FILES IN FULLY MIGRATED EXAMPLE (contratos):
  Root-level:
    - domain.ts         (type definitions, enums)
    - service.ts        (business logic)
    - repository.ts     (database operations)
    - index.ts          (public exports)
    - RULES.md          (business rules documentation)
    - errors.ts         (error types)
    - types.ts          (additional types)
  
  Directories:
    - actions/          (server actions for mutations)
    - components/       (React components)
    - hooks/            (custom React hooks)
    - utils/            (utility functions)
    - __tests__/        (unit and integration tests)


ACTIONS DIRECTORY PATTERN:
  Simple features:     1 action file
  Medium features:     2-4 action files
  Complex features:    5+ action files by subdomain
  
  Examples:
    - acervo:        acervo-actions
    - contratos:     contratos-actions, segmentos-actions
    - usuarios:      atividades-actions, auth-logs-actions, avatar-actions, 
                     cargos-actions, cover-actions, permissoes-actions, senha-actions
    - documentos:    arquivos-actions, compartilhamento-actions, documentos-actions,
                     lixeira-actions, pastas-actions, templates-actions, uploads-actions


CUSTOM HOOKS PATTERN:
  All mature features have use-*.ts files:
    - use-{featureName}.ts      (main hook for CRUD operations)
    - use-{subfeature}.ts       (optional, for subdomains)
  
  Examples:
    - use-contratos.ts
    - use-usuarios.ts
    - use-processos.ts


BUSINESS RULES DOCUMENTATION (RULES.md):
  9 features have RULES.md:
    - assinatura-digital, audiencias, busca, contratos, documentos,
      financeiro, obrigacoes, partes, processos
  
  Most comprehensive:
    - contratos    (191 lines) - business rules, validations, integrations, error codes
    - processos    (105+ lines) - CNJ validation, status mapping, audit system


================================================================================
                      MIGRATION PROGRESS BY METRICS
================================================================================

Architecture Completeness:
  ✓ Has domain.ts:      23/30 (77%)
  ✓ Has service.ts:     23/30 (77%)
  ✓ Has repository.ts:  18/30 (60%)
  ✓ Has actions/:       24/30 (80%)
  ✓ Has components/:    28/30 (93%)
  ✓ Has custom hooks:   ~20/30 (67%)
  ✓ Has RULES.md:        9/30 (30%)
  ✓ Has __tests__/:     28/30 (93%)

Top Priorities for Standardization:
  1. Add repository.ts to: chat, documentos, partes, financeiro
  2. Add service.ts to: documentos, partes, assinatura-digital
  3. Add domain.ts to: assinatura-digital, audiencias, perfil, portal-cliente
  4. Create RULES.md for: acervo, advogados, ai, assistentes, captura, cargos, etc.


================================================================================
                          INTEGRATION PATTERNS
================================================================================

Internal Module Dependencies:
  - contratos → financeiro (contract fees create financial transactions)
  - processos → acervo (judicial processes link to documents)
  - usuarios → permissoes (user permissions management)
  - expedientes → tipos-expedientes (document types)
  - partes → clientes/terceiros (party entity relationships)

External Integrations:
  - captura: PJE, TRT, Comunica CNJ (judicial systems)
  - chat: Dyte (video conferencing)
  - assinatura-digital: Digital signature services
  - ai: Embeddings, RAG, semantic search
  - pangea: Background check service

Data Flow Patterns:
  - Forms → Actions → Service → Repository → Database
  - Components → Custom Hooks → Actions → Service/Repository
  - Server Components → Direct Service/Repository calls


================================================================================
