## 1. Implementation
- [ ] 1.1 Modelagem de dados (Supabase declarative schema em `supabase/schemas/`)
  - [ ] 1.1.1 Tabelas para documentos de assinatura, assinantes e âncoras (assinatura/rubrica)
  - [ ] 1.1.2 Campos jsonb para “convidado” (sem criar entidade)
  - [ ] 1.1.3 Tokens opacos por assinante (link público), com status one-time
  - [ ] 1.1.4 Storage buckets/paths para PDFs originais e PDFs finalizados e artefatos (selfie/assinatura)
- [ ] 1.2 Endpoints administrativos (criação do documento e listagem)
  - [ ] 1.2.1 Criar documento por upload de PDF + lista de assinantes + flag selfie
  - [ ] 1.2.2 Persistir âncoras (coordenadas, página, tipo, assinante)
  - [ ] 1.2.3 Retornar links por assinante (copiar/visualizar)
- [ ] 1.3 UI Admin (novo fluxo principal do módulo)
  - [ ] 1.3.1 Página “Enviar PDF para assinatura” como entrada principal
  - [ ] 1.3.2 Seleção de assinantes (entidade existente por tipo, ou convidado)
  - [ ] 1.3.3 Upload de PDF
  - [ ] 1.3.4 Editor visual de âncoras (assinatura/rubrica) por assinante
  - [ ] 1.3.5 Tela final com links por assinante (copiar)
  - [ ] 1.3.6 Remover tab “Fluxo de Assinatura” da navegação padrão (manter código)
- [ ] 1.4 Fluxo público do assinante (link)
  - [ ] 1.4.1 Tela de identificação: inserir/confirmar dados (nome, CPF, e-mail, telefone)
  - [ ] 1.4.2 Selfie opcional (se exigido)
  - [ ] 1.4.3 Captura de assinatura e rubrica (1x cada) e replicação nas âncoras
  - [ ] 1.4.4 Bloqueio de reuso após conclusão
- [ ] 1.5 Finalização e geração do PDF final
  - [ ] 1.5.1 Carimbo de assinatura/rubrica em todas as posições marcadas
  - [ ] 1.5.2 Persistir metadados de segurança padrão (IP, user_agent, geo, hash/cripto) sem expor na UI
  - [ ] 1.5.3 Marcar assinante como concluído e documento como concluído quando todos assinarem
- [ ] 1.6 Segurança e autorização
  - [ ] 1.6.1 Admin: proteger endpoints com permissão `assinatura_digital` apropriada
  - [ ] 1.6.2 Link público: token opaco, não enumerável; validação de estado; rate limiting básico (se aplicável)
- [ ] 1.7 Testes
  - [ ] 1.7.1 Unit: validação de payloads e replicação de âncoras
  - [ ] 1.7.2 Integration: criação do documento + geração de links + finalização
  - [ ] 1.7.3 E2E: fluxo admin + fluxo assinante (mínimo feliz + erros)


